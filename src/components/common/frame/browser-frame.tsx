import { forwardRef, PropsWithChildren, useMemo } from 'react'

// NOTE 1280 x 800 の画面を埋め込む
// ref={ref}
// {...props}

type BrowserFrameProps = {
  innerWidth?: number
  innerHeight?: number
}

export const BrowserFrame = forwardRef<
  SVGSVGElement,
  PropsWithChildren<BrowserFrameProps>
>(function BrowserFrame(
  { children, innerWidth = 1280, innerHeight = 800, ...props },
  ref,
) {
  const { width, height, viewBox } = useMemo(() => {
    const width = innerWidth
    const height = innerHeight + 52

    return {
      width: `${width}`,
      height: `${height}`,
      viewBox: `0 0 ${width} ${height}`,
    }
  }, [innerHeight, innerWidth])

  return (
    <div className="rounded-[10px] shadow-2xl w-fit h-fit border">
      <div className="relative rounded-[10px] w-fit h-fit overflow-hidden">
        <svg
          width={width}
          height={height}
          viewBox={viewBox}
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
          ref={ref}
          {...props}
        >
          <g clip-path="url(#clip0_56_119)">
            <g filter="url(#filter0_b_56_119)">
              <path
                d="M0 9.5C0 4.25329 4.25329 0 9.5 0H1270.5C1275.75 0 1280 4.25329 1280 9.5V52H0V9.5Z"
                fill="white"
                fill-opacity="0.8"
              />
              <rect
                x="20"
                y="20"
                width="12"
                height="12"
                rx="6"
                fill="#EC6B5E"
              />
              <rect
                x="40"
                y="20"
                width="12"
                height="12"
                rx="6"
                fill="#F4BF4F"
              />
              <rect
                x="60"
                y="20"
                width="12"
                height="12"
                rx="6"
                fill="#61C453"
              />
              <path
                d="M101.242 32.5625H114.758C116.398 32.5625 117.211 31.75 117.211 30.1406V20.6016C117.211 18.9922 116.398 18.1797 114.758 18.1797H101.242C99.6094 18.1797 98.7891 18.9844 98.7891 20.6016V30.1406C98.7891 31.7578 99.6094 32.5625 101.242 32.5625ZM101.258 31.3047C100.477 31.3047 100.047 30.8906 100.047 30.0781V20.6641C100.047 19.8516 100.477 19.4375 101.258 19.4375H104.742V31.3047H101.258ZM114.742 19.4375C115.516 19.4375 115.953 19.8516 115.953 20.6641V30.0781C115.953 30.8906 115.516 31.3047 114.742 31.3047H105.969V19.4375H114.742ZM103.242 22.3359C103.477 22.3359 103.688 22.125 103.688 21.8984C103.688 21.6641 103.477 21.4609 103.242 21.4609H101.562C101.328 21.4609 101.125 21.6641 101.125 21.8984C101.125 22.125 101.328 22.3359 101.562 22.3359H103.242ZM103.242 24.3594C103.477 24.3594 103.688 24.1484 103.688 23.9141C103.688 23.6797 103.477 23.4844 103.242 23.4844H101.562C101.328 23.4844 101.125 23.6797 101.125 23.9141C101.125 24.1484 101.328 24.3594 101.562 24.3594H103.242ZM103.242 26.375C103.477 26.375 103.688 26.1797 103.688 25.9453C103.688 25.7109 103.477 25.5078 103.242 25.5078H101.562C101.328 25.5078 101.125 25.7109 101.125 25.9453C101.125 26.1797 101.328 26.375 101.562 26.375H103.242Z"
                fill="black"
                fill-opacity="0.6"
              />
              <rect
                x="124"
                y="17"
                width="1"
                height="18"
                fill="black"
                fill-opacity="0.1"
              />
              <path
                d="M131 25L134 28L137 25"
                stroke="black"
                stroke-opacity="0.6"
                stroke-width="1.25"
                stroke-linecap="round"
                stroke-linejoin="round"
              />
              <path
                d="M163.625 25.3594C163.625 25.5547 163.696 25.7266 163.844 25.875L170.04 31.9297C170.172 32.0703 170.344 32.1406 170.547 32.1406C170.954 32.1406 171.266 31.8359 171.266 31.4297C171.266 31.2266 171.18 31.0547 171.055 30.9219L165.368 25.3594L171.055 19.7969C171.18 19.6641 171.266 19.4844 171.266 19.2891C171.266 18.8828 170.954 18.5781 170.547 18.5781C170.344 18.5781 170.172 18.6484 170.04 18.7812L163.844 24.8438C163.696 24.9844 163.625 25.1641 163.625 25.3594Z"
                fill="black"
                fill-opacity="0.6"
              />
              <path
                d="M207.25 25.3594C207.25 25.5547 207.18 25.7266 207.032 25.875L200.836 31.9297C200.704 32.0703 200.532 32.1406 200.329 32.1406C199.922 32.1406 199.61 31.8359 199.61 31.4297C199.61 31.2266 199.696 31.0547 199.821 30.9219L205.508 25.3594L199.821 19.7969C199.696 19.6641 199.61 19.4844 199.61 19.2891C199.61 18.8828 199.922 18.5781 200.329 18.5781C200.532 18.5781 200.704 18.6484 200.836 18.7812L207.032 24.8438C207.18 24.9844 207.25 25.1641 207.25 25.3594Z"
                fill="black"
                fill-opacity="0.2"
              />
              <g transform={`translate(${innerWidth - 1280},0)`}>
                <path
                  d="M1179.49 27.4844C1179.83 27.4844 1180.12 27.2031 1180.12 26.875V18.8516L1180.07 17.6797L1180.59 18.2344L1181.78 19.5C1181.89 19.625 1182.05 19.6875 1182.2 19.6875C1182.52 19.6875 1182.77 19.4531 1182.77 19.1328C1182.77 18.9688 1182.7 18.8438 1182.59 18.7266L1179.95 16.1797C1179.79 16.0234 1179.66 15.9688 1179.49 15.9688C1179.34 15.9688 1179.2 16.0234 1179.04 16.1797L1176.4 18.7266C1176.28 18.8438 1176.22 18.9688 1176.22 19.1328C1176.22 19.4531 1176.45 19.6875 1176.78 19.6875C1176.93 19.6875 1177.1 19.625 1177.21 19.5L1178.39 18.2344L1178.92 17.6797L1178.88 18.8516V26.875C1178.88 27.2031 1179.16 27.4844 1179.49 27.4844ZM1175.02 33.6016H1183.98C1185.61 33.6016 1186.43 32.7891 1186.43 31.1797V23.3828C1186.43 21.7734 1185.61 20.9609 1183.98 20.9609H1181.8V22.2188H1183.95C1184.73 22.2188 1185.17 22.6406 1185.17 23.4531V31.1094C1185.17 31.9219 1184.73 32.3438 1183.95 32.3438H1175.03C1174.25 32.3438 1173.82 31.9219 1173.82 31.1094V23.4531C1173.82 22.6406 1174.25 22.2188 1175.03 22.2188H1177.2V20.9609H1175.02C1173.38 20.9609 1172.56 21.7734 1172.56 23.3828V31.1797C1172.56 32.7891 1173.38 33.6016 1175.02 33.6016Z"
                  fill="black"
                  fill-opacity="0.6"
                />
                <path
                  d="M1209.55 25.3594C1209.55 25.7422 1209.88 26.0547 1210.25 26.0547H1215.3V31.1094C1215.3 31.4844 1215.62 31.8047 1216 31.8047C1216.38 31.8047 1216.7 31.4844 1216.7 31.1094V26.0547H1221.75C1222.12 26.0547 1222.45 25.7422 1222.45 25.3594C1222.45 24.9766 1222.12 24.6562 1221.75 24.6562H1216.7V19.6094C1216.7 19.2344 1216.38 18.9141 1216 18.9141C1215.62 18.9141 1215.3 19.2344 1215.3 19.6094V24.6562H1210.25C1209.88 24.6562 1209.55 24.9766 1209.55 25.3594Z"
                  fill="black"
                  fill-opacity="0.6"
                />
                <path
                  d="M1247.3 24.7266H1250.86C1251.85 24.7266 1252.35 24.2266 1252.35 23.1953V19.7031C1252.35 18.6719 1251.85 18.1797 1250.86 18.1797H1247.3C1246.3 18.1797 1245.8 18.6719 1245.8 19.7031V23.1953C1245.8 24.2266 1246.3 24.7266 1247.3 24.7266ZM1255.14 24.7266H1258.7C1259.69 24.7266 1260.19 24.2266 1260.19 23.1953V19.7031C1260.19 18.6719 1259.69 18.1797 1258.7 18.1797H1255.14C1254.14 18.1797 1253.64 18.6719 1253.64 19.7031V23.1953C1253.64 24.2266 1254.14 24.7266 1255.14 24.7266ZM1247.31 23.625C1247.04 23.625 1246.91 23.4844 1246.91 23.1953V19.7031C1246.91 19.4219 1247.04 19.2812 1247.31 19.2812H1250.84C1251.11 19.2812 1251.25 19.4219 1251.25 19.7031V23.1953C1251.25 23.4844 1251.11 23.625 1250.84 23.625H1247.31ZM1255.16 23.625C1254.88 23.625 1254.74 23.4844 1254.74 23.1953V19.7031C1254.74 19.4219 1254.88 19.2812 1255.16 19.2812H1258.68C1258.95 19.2812 1259.09 19.4219 1259.09 19.7031V23.1953C1259.09 23.4844 1258.95 23.625 1258.68 23.625H1255.16ZM1247.3 32.5625H1250.86C1251.85 32.5625 1252.35 32.0703 1252.35 31.0391V27.5391C1252.35 26.5156 1251.85 26.0156 1250.86 26.0156H1247.3C1246.3 26.0156 1245.8 26.5156 1245.8 27.5391V31.0391C1245.8 32.0703 1246.3 32.5625 1247.3 32.5625ZM1255.14 32.5625H1258.7C1259.69 32.5625 1260.19 32.0703 1260.19 31.0391V27.5391C1260.19 26.5156 1259.69 26.0156 1258.7 26.0156H1255.14C1254.14 26.0156 1253.64 26.5156 1253.64 27.5391V31.0391C1253.64 32.0703 1254.14 32.5625 1255.14 32.5625ZM1247.31 31.4609C1247.04 31.4609 1246.91 31.3203 1246.91 31.0391V27.5469C1246.91 27.2578 1247.04 27.1172 1247.31 27.1172H1250.84C1251.11 27.1172 1251.25 27.2578 1251.25 27.5469V31.0391C1251.25 31.3203 1251.11 31.4609 1250.84 31.4609H1247.31ZM1255.16 31.4609C1254.88 31.4609 1254.74 31.3203 1254.74 31.0391V27.5469C1254.74 27.2578 1254.88 27.1172 1255.16 27.1172H1258.68C1258.95 27.1172 1259.09 27.2578 1259.09 27.5469V31.0391C1259.09 31.3203 1258.95 31.4609 1258.68 31.4609H1255.16Z"
                  fill="black"
                  fill-opacity="0.6"
                />
              </g>
            </g>
          </g>
          <defs>
            <filter
              id="filter0_b_56_119"
              x="-48"
              y="-48"
              width="1376"
              height="148"
              filterUnits="userSpaceOnUse"
              color-interpolation-filters="sRGB"
            >
              <feFlood flood-opacity="0" result="BackgroundImageFix" />
              <feGaussianBlur in="BackgroundImageFix" stdDeviation="24" />
              <feComposite
                in2="SourceAlpha"
                operator="in"
                result="effect1_backgroundBlur_56_119"
              />
              <feBlend
                mode="normal"
                in="SourceGraphic"
                in2="effect1_backgroundBlur_56_119"
                result="shape"
              />
            </filter>
            <clipPath id="clip0_56_119">
              <rect width={width} height={height} rx="10" fill="white" />
            </clipPath>
          </defs>
        </svg>
        <div className="absolute left-0 bottom-0 w-full h-[calc(100%-52px)]">
          {children}
        </div>
      </div>
    </div>
  )
})
